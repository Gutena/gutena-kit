(()=>{document.addEventListener("DOMContentLoaded",(()=>{if(!gutenaNewsletterBlock)return;let t=document.querySelectorAll(".gutena-newsletter-form");for(let s=0;s<t.length;s++){var n;null===(n=t[s])||void 0===n||n.addEventListener("submit",(function(n){var a;n.preventDefault();let l=t[s].closest(".gutena-newsletter-field-block"),r=null==l?void 0:l.nextElementSibling,c=t[s].querySelector("#gutena-newsletter-field").value,o=t[s].querySelector("#gutena-newsletter-settings").value;if(r&&"undefined"!==r&&r.classList.contains("gutena-newsletter-message")&&r.remove(),!e(c))return void l.after(Object.assign(document.createElement("div"),{textContent:gutenaNewsletterBlock.email_invalid,className:"gutena-newsletter-message status error"}));l.after(Object.assign(document.createElement("div"),{innerHTML:'<span class="loader"></span>'+gutenaNewsletterBlock.in_process,className:"gutena-newsletter-message success"}));const u=new FormData;u.append("action","gutena_subscribe_newsletter"),u.append("nonce",gutenaNewsletterBlock.nonce),u.append("email",c),u.append("data",o),fetch(null===(a=gutenaNewsletterBlock)||void 0===a?void 0:a.ajax_url,{method:"POST",credentials:"same-origin",body:u}).then((e=>e.json())).then((e=>{var t;e&&(null!=l&&null!==(t=l.nextElementSibling)&&void 0!==t&&t.classList.contains("gutena-newsletter-message")&&l.nextElementSibling.remove(),"success"==e.status&&(l.querySelector("#gutena-newsletter-field").value=""),l.after(Object.assign(document.createElement("div"),{textContent:e.message,className:"gutena-newsletter-message status "+e.status})))})).catch((e=>{l.after(Object.assign(document.createElement("div"),{textContent:e,className:"gutena-newsletter-message error"}))}))}))}}));const e=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)})();