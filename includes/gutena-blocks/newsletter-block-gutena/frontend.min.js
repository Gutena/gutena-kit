let nodeList=document.querySelectorAll(".gutena-newsletter-form");for(let e=0;e<nodeList.length;e++)nodeList[e].addEventListener("submit",function(t){t.preventDefault();let n=nodeList[e].closest(".gutena-newsletter-field-block"),s=n.nextElementSibling,a=nodeList[e].querySelector("#gutena-newsletter-field").value,l=nodeList[e].querySelector("#gutena-newsletter-settings").value;if(s&&"undefined"!==s&&s.classList.contains("gutena-newsletter-message")&&s.remove(),!validateEmail(a))return void n.after(Object.assign(document.createElement("div"),{textContent:gutenaNewsletterBlock.email_invalid,className:"gutena-newsletter-message status error"}));n.after(Object.assign(document.createElement("div"),{innerHTML:'<span class="loader"></span>'+gutenaNewsletterBlock.in_process,className:"gutena-newsletter-message success"}));const r=new FormData;r.append("action","gutena_subscribe_newsletter"),r.append("nonce",gutenaNewsletterBlock.nonce),r.append("email",a),r.append("data",l),fetch(gutenaNewsletterBlock.ajax_url,{method:"POST",credentials:"same-origin",body:r}).then(e=>e.json()).then(e=>{e&&(n.nextElementSibling.classList.contains("gutena-newsletter-message")&&n.nextElementSibling.remove(),"success"==e.status&&(n.querySelector("#gutena-newsletter-field").value=""),n.after(Object.assign(document.createElement("div"),{textContent:e.message,className:"gutena-newsletter-message status "+e.status})))}).catch(e=>{n.after(Object.assign(document.createElement("div"),{textContent:e,className:"gutena-newsletter-message error"}))})});const validateEmail=e=>e.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);